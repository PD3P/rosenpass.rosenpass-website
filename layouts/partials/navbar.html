{{ $cover := and
    (.HasShortcode "blocks/cover")
    (not .Site.Params.ui.navbar_translucent_over_cover_disable)
-}}
<nav class="navbar navbar-expand-md navbar-light
            {{- if $cover }} td-navbar-cover {{- end }} flex-column flex-md-row td-navbar"  role="navigation">
   <div class="container-fluid">
		<a class="navbar-brand" href="{{ .Site.Home.RelPermalink }}">
		{{- /**/ -}}
		<span class="navbar-brand__logo navbar-logo">
		  {{- if ne .Site.Params.ui.navbar_logo false -}}
			{{ with resources.Get "icons/logo.svg" -}}
			  {{ ( . | minify).Content | safeHTML -}}
			{{ end -}}
		  {{ end -}}
		</span>
		{{- /**/ -}}
		<span class="navbar-brand__name">
		  {{- .Site.Title -}}
		</span>
		{{- /**/ -}}
	  </a>
	  	<button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#main_navbar" aria-controls="main_navbar" aria-expanded="false" aria-label="Toggle navigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
	  <div class="collapse navbar-collapse" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0" id="navbar-custom">
		  {{ $p := . -}}
		  {{ range .Site.Menus.main -}}
		  <li class="nav-item mr-4 mb-2 mb-lg-0 mx-auto">
			{{ $active := or ($p.IsMenuCurrent "main" .) ($p.HasMenuCurrent "main" .) -}}
			{{ with .Page }}{{ $active = or $active ( $.IsDescendant .) }}{{ end -}}
			{{ $pre := .Pre -}}
			{{ $post := .Post -}}
			{{ $url := urls.Parse .URL -}}
			{{ $baseurl := urls.Parse $.Site.Params.Baseurl -}}
			<a {{/**/ -}}
			  class="nav-link {{- if $active }} active {{- end }}" {{/**/ -}}
			  href="{{ with .Page }}{{ .RelPermalink }}{{ else }}{{ .URL | relLangURL }}{{ end }}"
			  {{- if ne $url.Host $baseurl.Host }} target="_blank" {{- end -}}
			>
				{{- with .Pre }}{{ $pre }}{{ end -}}
				<span {{- if $active }} class="active" {{- end }}>
				  {{- .Name -}}
				</span>
				{{- with .Post }}{{ $post }}{{ end -}}
			</a>
		  </li>
		  {{ end -}}
		  {{ if .Site.Params.versions -}}
		  <li class="nav-item dropdown mr-4 d-none d-lg-block">
			{{ partial "navbar-version-selector.html" . -}}
		  </li>
		  {{ end -}}
		  {{ if (gt (len .Site.Home.Translations) 0) -}}
		  <li class="nav-item dropdown mr-4 d-none d-lg-block">
			{{ partial "navbar-lang-selector.html" . -}}
		  </li>
		  {{ end -}}
		  {{ if .Site.Params.ui.showLightDarkModeMenu -}}
		  <li class="td-light-dark-menu nav-item dropdown">
			{{ partial "theme-toggler" . }}
		  </li>
		  {{ end -}}
		</ul>
	  </div>
	  <div class="navbar-nav d-none d-md-block">
		{{ partial "search-input.html" . }}
	  </div>
	 </div>
</nav>
